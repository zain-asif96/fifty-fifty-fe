import{_ as $}from"./FiftyText-b13f5419.js";import{u as h}from"./useAPI-5d208629.js";import{_ as v}from"./NewTextInput-f00b3737.js";import{_ as B}from"./NewSelectInput-293ca775.js";import{N}from"./NewActionButton-b46bcee5.js";import{k as p,K as k,r as y,c as q,a as n,w,b as D,u as c,O as F,o as L,g as R}from"./app-db97278d.js";import{u as O}from"./notification-acac295e.js";import{c as S}from"./currencies_countries-fbccd8be.js";import"./Spinner-c1a705af.js";/* empty css                                                *//* empty css                                                     */import"./_plugin-vue_export-helper-c27b6911.js";const T={class:"transaction-box-container"},U={class:"inputs"},E={name:"TransactionBox"},X=Object.assign(E,{props:{receivingCountries:{required:!0,default:[],type:Array}},setup(i){const f=i,A=h(),g=O(),t=p({}),e=p({amount:null,country:null,convertedAmount:null}),l=k().props.geoDetails,a=y(!1),u=y(0),_=async()=>{a.value=!0;const s=f.receivingCountries.find(o=>o.code_iso_2===e.country||o.code===e.country);try{const o=await axios.post("/api/convert-currency",{baseCurrency:l.country.currency.code,requiredCurrency:s.currency.code});console.log({res:o}),u.value=o==null?void 0:o.data[s.currency.code].value,e.convertedAmount=m()}catch{g.notify("Exchange rate is not available at the moment..","error")}finally{a.value=!1}},C=()=>{if(t.amount=[],e.amount>=1e3)return e.amount=1e3,t.amount=["1000 is the maximum amount"];e.convertedAmount=m()},b=()=>{if(t.convertedAmount=[],e.convertedAmount>=1e3)return e.convertedAmount=1e3,t.convertedAmount=["1000 is the maximum amount"];e.amount=x()},m=()=>parseFloat((u.value*e.amount).toFixed(2)),x=()=>parseFloat((e.convertedAmount/u.value).toFixed(2));function V(){return F.visit(`/user-info?receiver_country=${e.country}&receiver_gets=${e.convertedAmount}&amount=${e.amount}`)}return(s,o)=>{var d;return L(),q("div",T,[n($,{color:"dark",variation:"body-bold"},{default:w(()=>[R(" Provide Your Transaction Details ")]),_:1}),D("div",U,[n(v,{modelValue:e.amount,"onUpdate:modelValue":[o[0]||(o[0]=r=>e.amount=r),C],errors:t.amount,info:c(l).country.currency.code,label:"Your amount",placeholder:"Amount to send",max:1e3,min:10,required:"",type:"number",title:"amount"},null,8,["modelValue","errors","info"]),n(B,{modelValue:e.country,"onUpdate:modelValue":[o[1]||(o[1]=r=>e.country=r),_],disabled:!1,errors:(d=c(A).errors.value)==null?void 0:d.country,options:i.receivingCountries,label:"Receiver Country","label-accessor":"label",placeholder:"Country",required:"",title:"country",type:"text","value-accessor":"code_iso_2"},null,8,["modelValue","errors","options"]),n(v,{errors:t.convertedAmount,modelValue:e.convertedAmount,"onUpdate:modelValue":[o[2]||(o[2]=r=>e.convertedAmount=r),b],info:c(S)[e.country]??"",isLoading:a.value,label:"Receiver gets",placeholder:"Amount received",required:"",max:1e3,min:10,type:"number",title:"convertedAmount"},null,8,["errors","modelValue","info","isLoading"]),n(N,{onClick:o[3]||(o[3]=r=>V()),class:"custom-action-btn",title:"Get Started"})])])}}});export{X as default};
